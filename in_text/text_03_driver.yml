title: >-
  Data to support water quality modeling efforts in the Delaware River Basin: 3) Model Driver Data

abstract: >-
  This child item includes model drivers such as gridded weather data pulled from NOAA GEFS and gridMET, and the stream network distance matrix for the Delaware River Basin.
  Additionally, inputs and outputs from an uncalibrated process-based stream temperature model are included.
cross-cites:
  -
    authors: ['Steven L. Markstrom']
    title: >-
      P2S-Coupled simulation with the Precipitation-Runoff Modeling
      System (PRMS) and the Stream Temperature Network (SNTemp) Models
    pudate: 2012
    form: publication
    link: https://doi.org/10.3133/ofr20121116
  -
    authors: ['John T. Abatzoglou']
    title: >-
      Development of gridded surface meteorological data for ecological applications and modelling
    pubdate: 2013
    form: publication
    link: https://doi.org/10.1002/joc.3413
  -
    authors: ['Roland Viger', 'Andrew Bock']
    title: >-
      GIS Features of the Geospatial Fabric for National Hydrologic Modeling
    pubdate: 2014
    link: http://dx.doi.org/doi:10.5066/F7542KMD
  -
    authors: ['Roland Viger']
    title: >-
      Preliminary spatial parameters for PRMS based on the Geospatial Fabric, NLCD2001 and SSURGO
    pubdate: 2014
    link: http://dx.doi.org/doi:10.5066/F7WM1BF7

  -
    authors: ['NA']
    title: >-
      National Oceanic and Atmospheric Administration's Global Ensemble Forecast System Version 12: Reforecast Data
    pubdate: 2021
    link: https://noaa-gefs-retrospective.s3.amazonaws.com/index.html

entities:
  -
    data-name: >-
      distance_matrix_drb.csv
    data-description: >-
      A matrix documenting the upstream (negative numbers) or downstream (positive numbers)
      distances between river reaches. There is one file for all 456 reaches in the Delaware
      River Basin modeling network (distance_matrix_drb.csv).

    attributes:
    -
      attr-label: from
      attr-def: >-
        The segment ID (seg_id_nat) of the starting segment for the distance calculation.
      attr-defs: >-
        https://www.sciencebase.gov/catalog/item/535eda80e4b08e65d60fc834
      data-min: -138821.4
      data-max: 120381.61
      data-units: meters
    -
      attr-label: >-
        {seg_id_nat}
      attr-def: >-
        All columns other than the "from" column are named with a seg_id_nat value, where the column values correspond to the
        distance (in meters) between the seg_id_nat in the "from"" column to the {seg_id_nat} in the column name.
        Positive numbers indicate a downstream direction, while positive numbers indicate an upstream direction.
        "Inf" indicates the two segments are not connected by streamflow (e.g., water from two separate
        branches that share the same mainstem are not connected via streamflow).
      attr-defs: This data release
      data-min: -138821.4
      data-max: 120381.61
      data-units: meters
  -
    data-name: >-
      uncal_sntemp_inputs_outputs.nc.zip
    data-description: >-
      PRMS-SNTemp inputs and outputs, including weather driver data, intermediate varibles, and
      model predictions. The file contain inputs/outputs from all 456 stream reaches in the
      Delaware River Basin modeling network.

      Code used to generate these inputs and outputs can be found in the repository "run-prms-sntemp" in Zwart and others 2021 (https://doi.org/10.5281/zenodo.5164910 (to update with latest DOI)).

      There are two error codes in PRMS-SNTemp v5.1.0_rc that can be present in the
      seg_tave_water and seg_tave_upstream attributes indicating no streamflow for the current
      timestep (error code: -98.9) or no streamflow at any timestep (error code: -99.9) of the model run.
      Stream segments that never have streamflow (-99.9) do not have any hydrologic reach units and do not have any upstream segments to produce
      streamflow, and consequently never be able to simulate stream temperature. Segments with
      contributing hydrologic reach units and/or upstream segments can have streamflow but
      may not have streamflow at the current timestep (-98.9)

      Very negative groundwater and shallow subsurface water temperatures (e.g. less than -1 C) are
      not error codes, but rather are a product of the way this version of PRMS-SNTemp is coded. However,
      we advise against using these very low groundwater and shallow subsurface temperature values
      as they likely are far from actual water temperatures.
    attributes:
    -
      attr-label: seg_id_nat
      attr-def: >-
        Stream reach identification number for this dataset. This is the ID named seg_id_nat from the Geospatial Fabric for National Hydrologic Modeling.
      attr-defs: >-
        https://www.sciencebase.gov/catalog/item/535eda80e4b08e65d60fc834
      data-min: NA
      data-max: NA
      data-units: NA

    -
      attr-label: date
      attr-def: >-
        Date of the observation or prediction.
      attr-defs: This data release
      data-min: 1979-01-01
      data-max: 2022-04-04
      data-units: NA
    -
      attr-label: seg_ccov
      attr-def: >-
        Area-weighted average cloud cover fraction for each segment from HRUs contributing flow to the segment.
      attr-defs: https://doi.org/10.1002/joc.3413
      data-min: NA
      data-max: NA
      data-units: decimal fraction
    -
      attr-label: seg_humid
      attr-def: >-
        Area-weighted average relative humidity for each segment from HRUs contributing flow to the segment
      attr-defs: https://doi.org/10.1002/joc.3413
      data-min: NA
      data-max: NA
      data-units: decimal fraction
    -
      attr-label: seg_outflow
      attr-def: >-
        Streamflow leaving a segment
      attr-defs: This data release
      data-min: NA
      data-max: NA
      data-units: cubic meters per second
    -
      attr-label: seg_rain
      attr-def: >-
        Area-weighted average rainfall for each segment from HRUs contributing flow to the segment
      attr-defs: https://doi.org/10.1002/joc.3413
      data-min: NA
      data-max: NA
      data-units: meters
    -
      attr-label: seg_shade
      attr-def: >-
        Area-weighted average shade fraction for each segment
      attr-defs: https://www.sciencebase.gov/catalog/item/535eda80e4b08e65d60fc834
      data-min: 0
      data-max: 0
      data-units: decimal fraction
    -
      attr-label: seg_tave_air
      attr-def: >-
         Area-weighted average air temperature for each segment from HRUs contributing flow to the segment
      attr-defs: https://doi.org/10.1002/joc.3413
      data-min: NA
      data-max: NA
      data-units: degrees Celsius
    -
      attr-label: seg_tave_gw
      attr-def: >-
        Groundwater temperature.
      attr-defs: This data release
      data-min: NA
      data-max: NA
      data-units: degrees Celsius
    -
      attr-label: seg_tave_sroff
      attr-def: >-
        Surface runoff temperature.
      attr-defs: This data release
      data-min: NA
      data-max: NA
      data-units: degrees Celsius
    -
      attr-label: seg_tave_ss
      attr-def: >-
        Subsurface temperature.
      attr-defs: This data release
      data-min: NA
      data-max: NA
      data-units: degrees Celsius
    -
      attr-label: seg_tave_upstream
      attr-def: >-
        Temperature of streamflow entering each segment.
      attr-defs: This data release
      data-min: NA
      data-max: NA
      data-units: degrees Celsius
    -
      attr-label: seg_tave_water
      attr-def: >-
        Computed daily mean stream temperature for each segment
      attr-defs: This data release
      data-min: NA
      data-max: NA
      data-units: degrees Celsius
    -
      attr-label: seg_upstream_inflow
      attr-def: >-
        Sum of inflow from upstream segments
      attr-defs: This data release
      data-min: NA
      data-max: NA
      data-units: cubic meters per second
    -
      attr-label: seg_width
      attr-def: >-
        Width of each segment.
      attr-defs: This data release.
      data-min: NA
      data-max: NA
      data-units: meters
    -
      attr-label: seginc_gwflow
      attr-def: >-
          Area-weighted average groundwater discharge for each segment from HRUs contributing flow to the segment.
      attr-defs: This data release
      data-min: NA
      data-max: NA
      data-units: cubic meters per second
    -
      attr-label: seginc_potet
      attr-def: >-
        Area-weighted average potential ET for each segment from HRUs contributing flow to the segment.
      attr-defs: This data release
      data-min: NA
      data-max: NA
      data-units: meters
    -
      attr-label: seginc_sroff
      attr-def: >-
        Area-weighted average surface runoff for each segment from HRUs contributing flow to the segment.
      attr-defs: This data release
      data-min: NA
      data-max: NA
      data-units: cubic meters per second
    -
      attr-label: seginc_ssflow
      attr-def: >-
        Area-weighted average interflow for each segment from HRUs contributing flow to the segment.
      attr-defs: This data release
      data-min: NA
      data-max: NA
      data-units: cubic meters per second
    -
      attr-label: seginc_swrad
      attr-def: >-
        Area-weighted average solar radiation for each segment from HRUs contributing flow to the segment.
      attr-defs: This data release
      data-min: NA
      data-max: NA
      data-units: watts per square meter
    -
      attr-label: seg_length
      attr-def: >-
        Length of stream segment.
      attr-defs: https://www.sciencebase.gov/catalog/item/535eda80e4b08e65d60fc834
      data-min: NA
      data-max: NA
      data-units: meters
    -
      attr-label: seg_slope
      attr-def: >-
        Stream segment slope.
      attr-defs: https://www.sciencebase.gov/catalog/item/535eda80e4b08e65d60fc834
      data-min: NA
      data-max: NA
      data-units: NA
    -
      attr-label: seg_elev
      attr-def: >-
        Stream segment average elevation above mean sea level.
      attr-defs: https://www.sciencebase.gov/catalog/item/535eda80e4b08e65d60fc834
      data-min: NA
      data-max: NA
      data-units: meters

  -
    data-name: 'reanalysis_gefs_drb.csv'
    data-description: >-
      NOAA GEFSv12.0 reforcast data  for the 00 UTC forecast cycle spanning the period 2000-01-01 to 2019-12-31.
      These data are aggregated to the daily scale and NOAA GEFS grid cells are matched to the centroid of the target stream segment. The target stream segment
      seg_id_nat (National Geospatial Fabric segment code) is used as the location identifier for these data.

    attributes:
    -
      attr-label: ensemble
      attr-def: >-
        NOAA GEFS ensemble member
      attr-defs:
      data-min: 0
      data-max: 4
      data-units: NA

    -
      attr-label: srad
      attr-def: >-
        Downward short-wave radiation flux
      attr-defs: https://www.nco.ncep.noaa.gov/pmb/products/gens/gec00.t00z.pgrb2s.0p25.f003.shtml
      data-min: 0.0
      data-max: 376.5
      data-units: Watts per meter squared
    -
      attr-label: ws
      attr-def: >-
        Wind speed
      attr-defs: https://www.nco.ncep.noaa.gov/pmb/products/gens/gec00.t00z.pgrb2s.0p25.f003.shtml
      data-min: 0.45
      data-max: 16.75
      data-units: meters per second
    -
      attr-label: tmax
      attr-def: >-
        Maximum air temperature
      attr-defs: https://www.nco.ncep.noaa.gov/pmb/products/gens/gec00.t00z.pgrb2s.0p25.f003.shtml
      data-min: -20.4
      data-max: 39.05
      data-units: degrees C
    -
      attr-label: tmin
      attr-def: >-
        Minimum air temperature
      attr-defs: https://www.nco.ncep.noaa.gov/pmb/products/gens/gec00.t00z.pgrb2s.0p25.f003.shtml
      data-min: -27.4
      data-max: 27.88
      data-units: degrees C
    -
      attr-label: prcp
      attr-def: >-
        Total accumulated precipitation
      attr-defs: https://www.nco.ncep.noaa.gov/pmb/products/gens/gec00.t00z.pgrb2s.0p25.f003.shtml
      data-min: 0
      data-max: 0.2272
      data-units: meters
    -
      attr-label: time
      attr-def: >-
        Valid time of the forecast
      attr-defs: This data release
      data-min: NA
      data-max: NA
      data-units: date
    -
      attr-label: seg_id_nat
      attr-def: >-
        National unique stream reach identifier. This is the ID named seg_id_nat from the Geospatial Fabric for National Hydrologic Modeling.
      attr-defs: >-
        https://www.sciencebase.gov/catalog/item/535eda80e4b08e65d60fc834
      data-min: NA
      data-max: NA
      data-units: dimensionless
    -
      attr-label: rhmax
      attr-def: >-
         Maximum Relative Humidity
      attr-defs:
      data-min: 0.35
      data-max: 1.00
      data-units: proportion (or fraction)
    -
      attr-label: rhmin
      attr-def: >-
         Minimum Relative Humidity
      attr-defs:
      data-min: 0.15
      data-max: 1.00
      data-units: proportion (or fraction)
    -
      attr-label: rhmean
      attr-def: >-
         Mean Relative Humidity
      attr-defs:
      data-min: 0.28
      data-max: 1.00
      data-units: proportion (or fraction)

  -
    data-name: 'gridmet_drb_agg.csv.zip'
    data-description: >-
      Tabular aggregated version of the GridMET data collected for the DRB contains spatial meterological data from 1979 to 2022, in daily time steps. This data is maintained and collected by <li><a href="https://www.climatologylab.org/gridmet.html"> Climatology lab </a>
      The meterological data variables used in this study include temperature min (tmin) and max (tmax), short wave radiation (srad), wind speed (vs), precipitation amount (pr), relative humidity min (rmin), relative humidity max (rmax) and specific humidity (sp). Derived from 4 km2 grids.
      The data is aggregated to PRMS segment scale (NHM catchment polygons) through an area-weighted mean, such that each segment evaluated in this study has associated meterological data for everyday since 01-01-1979.

    attributes:
    -
      attr-label: PRMS_segid
      attr-def: >-
        PRMS segment identifier (NHM catchment polygons)
      attr-defs: XX [TBD - link to documentation on PRMS identifiers]
      data-min: NA
      data-max: NA
      data-units: 
    -
      attr-label: time
      attr-def: >-
        date
      attr-defs:
      data-min: 1979-01-01
      data-max: 2022-04-06
      data-units: 

      attr-label: tmmn
      attr-def: >-
        Daily Minimum Temperature (2m)
      attr-defs:
      data-min: -26
      data-max: 82.2
      data-units: degrees F

    -
      attr-label: tmmx
      attr-def: >-
         Daily Maximum Temperature (2m)
      attr-defs:
      data-min: -7.2
      data-max: 108.2
      data-units: degrees F
    -
      attr-label: srad
      attr-def: >-
        Daily Mean downward shortwave radiation at surface
      attr-defs:
      data-min: 0
      data-max: 357.6
      data-units: W m-2
    -
      attr-label: vs
      attr-def: >-
        Daily Mean Wind Speed (10m)
      attr-defs:
      data-min: 0
      data-max: 17.6
      data-units: m/s
    -
      attr-label: rmin
      attr-def: >-
        Daily Minimum Relative Humidity (2m)
      attr-defs:
      data-min: 4.5
      data-max: 100
      data-units: percent
    -
      attr-label: rmax
      attr-def: >-
        Daily Maximum Relative Humidity (2m)
      attr-defs:
      data-min: 22.0
      data-max: 100
      data-units: percent
    -
      attr-label: pr
      attr-def: >-
        Daily Accumulated Precipitation
      attr-defs:
      data-min: 0
      data-max: 8.97
      data-units: inch
    -
      attr-label: sph
      attr-def: >-
         Daily mean specific humidity (2m)
      attr-defs:
      data-min: 0
      data-max: 0.02
      data-units: kg/kg

  -
    data-name: 'gridmet_drb_agg_csv.nc.zip'
    data-description: >-
      NetCDF format is the same as the tabular format  of the GridMET data described above. This data is aggregated through area weighted mean to the HRU polygons of the DRB.

    attributes:
    -
      attr-label: hru_lat
      attr-def: >-
        Latitude of HRU centroid
      attr-defs:
      data-min: NA
      data-max: NA
      data-units: degrees_north
    -
      attr-label: hru_lon
      attr-def: >-
        Longitude of HRU centroid
      attr-defs:
      data-min: NA
      data-max: NA
      data-units: degrees_east
    -
      attr-label: geomid
      attr-def: >-
        local model hru id. Used to match to HRU ids for the PRMS-SNTemp model. Also matches to PRMS segments to produce gridmet_drb_agg.csv
      attr-defs:
      data-min: NA
      data-max: NA
      data-units: NA
    -
      attr-label: time
      attr-def: >-
        Date
      attr-defs:
      data-min: 1979-01-01
      data-max: 2022-04-06
      data-units: date
    -
      attr-label: tmmn
      attr-def: >-
        Daily Minimum Temperature (2m)
      attr-defs:
      data-min: -26.0
      data-max: 82.2
      data-units: degrees F
    -
      attr-label: tmmx
      attr-def: >-
         Daily Maximum Temperature (2m)\
      attr-defs:
      data-min: -7.2
      data-max: 108.2
      data-units: degrees F
    -
      attr-label: srad
      attr-def: >-
        Daily Mean downward shortwave radiation at surface
      attr-defs:
      data-min: 0
      data-max: 359.7
      data-units: W m-2
    -
      attr-label: vs
      attr-def: >-
        Daily Mean Wind Speed (10m)
      attr-defs:
      data-min: 0
      data-max: 17.6
      data-units: m/s
    -
      attr-label: rmin
      attr-def: >-
        Daily Minimum Relative Humidity (2m)
      attr-defs:
      data-min: 4.5
      data-max: 100
      data-units: percent
    -
      attr-label: rmax
      attr-def: >-
        Daily Maximum Relative Humidity (2m)
      attr-defs:
      data-min: 22.0
      data-max: 100
      data-units: percent
    -
      attr-label: pr
      attr-def: >-
        Daily Accumulated Precipitation
      attr-defs:
      data-min: 0
      data-max: 9.1
      data-units: inch
    -
      attr-label: sph
      attr-def: >-
         Daily mean specific humidity (2m)
      attr-defs:
      data-min: 0
      data-max: 0.02
      data-units: kg/kg


build-environment: Multiple computer systems were used to generate these data, including Windows, OSX, and linux. The open source languages R and Python was used on all systems.

process-date: !expr format(Sys.time(),'%Y%m%d')
indirect-spatial: U.S.A.
latitude-res: 0.1
longitude-res: 0.1

file-format: comma-delimited files (some compressed into zip files) and NetCDF files compressed into a zip file
